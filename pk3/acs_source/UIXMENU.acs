#library "UIXMENU"

#include "zcommon.acs"

script "UITweaks_DefaultPresets" (void) NET CLIENTSIDE
{
    Delay(1);

	int cpn = ConsolePlayerNumber();
	if(cpn!=PlayerNumber())
        terminate;

    ACS_NamedExecuteWithResult("UITweaks_TeaminfoPreset", 0, true);
    ACS_NamedExecuteWithResult("UITweaks_WeaponBarPreset", 0, true);
}

// Built-in presets
#define TEAMINFO_CVARS_MAX 14
str TeamInfo_Cvars[TEAMINFO_CVARS_MAX] = {
    "UIX2_CL_TEAMINFOSHOWMUGSHOT",
    "UIX2_CL_TEAMINFOSHOWLIVES",
    "UIX2_CL_TEAMINFOSHOWLOCATION",
    "UIX2_CL_TEAMINFOSHOWHEALTH",
    "UIX2_CL_TEAMINFOSHOWNAME",
    "UIX2_CL_TEAMINFOSTACK",
    "UIX2_CL_TEAMINFOFONTDIR",
    "UIX2_CL_TEAMINFODIR",
    "UIX2_CL_TEAMINFOMIRROR",
    "UIX2_CL_TEAMINFONAMESIZE",
    "UIX2_CL_TEAMINFOALPHA",
    "UIX2_CL_TEAMINFOSCALE",
    "UIX2_CL_TEAMINFOOFFSY",
    "UIX2_CL_TEAMINFOOFFSX",
};

// 0 - top middle
// 1 - bottom left
// 2 - bottom right
int TeamInfo_Presets[3][TEAMINFO_CVARS_MAX] = {
    {true,true,true,true,true,false,false,true,false,96,1.0,1.5,-440,-416},
    {true,true,true,true,true,true,false,false,false,96,1.0,2.0,370,-540},
    {true,true,true,true,true,true,false,false,true,96,1.0,2.0,370,600},
};

script "UITweaks_TeaminfoPreset" (int which, int callback) NET CLIENTSIDE {
    if(!callback)
        Delay(1);

	int cpn = ConsolePlayerNumber();
	if(cpn!=PlayerNumber())
        terminate;

    for(int i = 0; i < TEAMINFO_CVARS_MAX; i++)
    {
        SetUserCvar(cpn, TeamInfo_Cvars[i], TeamInfo_Presets[which][i]);
    }
}

#define WEAPONBAR_CVARS_MAX 8
str WeaponBar_Cvars[WEAPONBAR_CVARS_MAX] = {
    "UIX2_CL_WEAPBARROWMAX",
    "UIX2_CL_WEAPBARSHOWSLOTS",
    "UIX2_CL_WEAPBARALPHA",
    "UIX2_CL_WEAPBARDIR",
    "UIX2_CL_WEAPBARMIRROR",
    "UIX2_CL_WEAPBARSCALE",
    "UIX2_CL_WEAPBAROFFSY",
    "UIX2_CL_WEAPBAROFFSX",
};

// 0 - middle right
// 1 - middle left
// 2 - bottom middle
int WeaponBar_Presets[3][WEAPONBAR_CVARS_MAX] = {
    {5,true,1.0,true,false,2.0,-120,464},
    {5,true,1.0,true,true,2.0,-120,-430},
    {5,true,1.0,false,true,2.0,336,-144},
};

script "UITweaks_WeaponBarPreset" (int which, int callback) NET CLIENTSIDE {
    if(!callback)
        Delay(1);

	int cpn = ConsolePlayerNumber();
	if(cpn!=PlayerNumber())
        terminate;

    for(int i = 0; i < WEAPONBAR_CVARS_MAX; i++)
    {
        SetUserCvar(cpn, WeaponBar_Cvars[i], WeaponBar_Presets[which][i]);
    }
}
